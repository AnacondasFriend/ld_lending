const body=document.querySelector("body"),buttons=document.querySelectorAll(".btn"),closebuttons=document.querySelectorAll(".closePopup"),calcPrice=document.querySelector(".calcPrice"),res=document.querySelector(".resCalc"),burger=document.querySelector(".burger"),nav=document.querySelector("nav");var priceForOnePiece;const sendLittleForm=document.querySelector(".sendLittleForm"),sendBigForm=document.querySelector(".sendBigForm"),littleForm=document.querySelector(".popup.littleForm"),bigForm=document.querySelector(".popup.bigForm"),textPattern=/^/,telPattern=/^/,emailPattern=/^/,request=new XMLHttpRequest,urlLittleForm="php/littleForm.php";let params;function calculatePrice(e,t){if("fullproject"==e)priceForOnePiece=500;else if("withoutGreenPlan"==e||"greenPlan"==e)priceForOnePiece=400;else{if("flowerGarden"==e)return(priceForOnePiece=250)*Number(t);if("eskiz"==e)return 1e3}return priceForOnePiece*Number(t)/100}function showPrice(e){res.parentNode.style.display="inline-block",res.innerHTML=`${e}`}function showNavigation(){nav.classList.toggle("show-hide"),0==nav.classList.length?burger.querySelector("img").setAttribute("src","icons/list.svg"):burger.querySelector("img").setAttribute("src","icons/x-lg.svg")}function checkLittleForm(){return params="",clientName=littleForm.querySelector("input[type='text']").value,clientNum=littleForm.querySelector("input[type='tel']").value,clientMail=littleForm.querySelector("input[type='email']").value,params="&name="+clientName+"&phonenumber="+clientNum+"&email="+clientMail,!0}function checkBigForm(){params="",textInputs=littleForm.querySelectorAll("input[type='text']"),clientNum=littleForm.querySelector("input[type='tel']"),clientMail=littleForm.querySelector("input[type='email']");for(let e of textInputs)params+=`&${e.getAtribute("name")}=${e.value}`;return!0}function showMessage(){littleForm.style.display="none",body.style.overflow="visible",body.insertAdjacentHTML("beforeend",'<div class="send-success"><div class="message">Заявка успешно отправлена! Ожидайте звонка.</div></div>'),setTimeout((()=>{mes=body.querySelector(".send-success"),mes.remove()}),1500)}for(btn of(request.open("POST",urlLittleForm,!0),request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),buttons))btn.addEventListener("click",(e=>{popupClass=e.target.classList[1],popupNode=document.querySelector(`.${popupClass}.popup`),popupNode.style.display="inline-block",body.style.overflow="hidden"}));for(btn of closebuttons)btn.addEventListener("click",(e=>{e.target.parentNode.parentNode.style.display="none",body.style.overflow="visible"}));calcPrice.addEventListener("click",(()=>{const e=document.querySelector(".checks input[type='radio']:checked").id,t=document.querySelector("#area").value;price=calculatePrice(e,t),showPrice(price)})),burger.addEventListener("click",showNavigation),sendLittleForm.addEventListener("click",(e=>{e.preventDefault(),checkLittleForm()&&request.send(params)})),sendBigForm.addEventListener("click",(e=>{e.preventDefault(),checkBigForm()&&request.send(params)})),request.addEventListener("readystatechange",(()=>{4===request.readyState&&200===request.status&&(console.log(request.responseText),showMessage())}));